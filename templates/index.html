{% extends 'base.html' %}

{% block title %}{{ site_name }} - {{ site_description }}{% endblock %}

{% block content %}
    <h2>最新播客</h2>
    
    <div class="episodes-list">
        {% if episodes %}
            {% for episode in episodes %}
            <div class="episode-card">
                <h3>{{ episode.title }}</h3>
                <div class="episode-meta">
                    <span>发布于: {{ episode.pub_date }}</span>
                    {% if episode.duration %}
                    <span>时长: {{ episode.duration//60 }}:{{ '%02d'|format(episode.duration%60) }}</span>
                    {% endif %}
                    {% if episode.password %}
                    <span class="locked-indicator">🔒 受密码保护</span>
                    {% endif %}
                </div>
                <div class="episode-description">{{ episode.description|safe|truncate(150) }}</div>
                <a href="{{ url_for('episode', episode_id=episode.id) }}" class="button">
                    {% if episode.password %}
                    输入密码收听
                    {% else %}
                    收听播客
                    {% endif %}
                </a>
            </div>
            {% endfor %}
        {% else %}
            <p>目前还没有播客内容。</p>
        {% endif %}
    </div>
    
    <div class="subscription-guide">
        <h3>订阅播客</h3>
        <p>您可以通过以下方式订阅我们的播客:</p>
        <ul>
            <li>RSS Feed: <code>{{ url_for('feed', _external=True) }}</code></li>
            <li>将上面的链接添加到您喜欢的播客应用中</li>
        </ul>
    </div>
{% endblock %}