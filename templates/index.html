{% extends "base.html" %}

{% block content %}
<h2>播客列表</h2>

{% if episodes|length > 0 %}
    <div class="episodes-list">
        {% for episode in episodes %}
        <div class="episode-card">
            <h3>{{ episode.title }}</h3>
            <div class="episode-meta">
                <span class="episode-date">{{ episode.pub_date }}</span>
            </div>
            <p class="episode-description">{{ episode.description }}</p>
            <a href="{{ url_for('episode', episode_id=episode.id) }}" class="button">收听播客</a>
            
            <!-- 添加删除功能 -->
            <form action="{{ url_for('delete_episode', episode_id=episode.id) }}" method="post" style="margin-top: 10px;">
                <button type="submit" class="button" style="background-color: rgba(255, 50, 50, 0.3);"
                    onclick="return confirm('确定要删除这个播客吗？');">删除</button>
            </form>
            
            {% if episode.is_demo %}
            <span style="display: inline-block; margin-top: 8px; font-size: 0.8em; color: #ff5fd7;">* 演示播客</span>
            {% endif %}
        </div>
        {% endfor %}
    </div>
{% else %}
    <p>还没有上传任何播客。</p>
{% endif %}

<div class="subscription-guide">
    <h3>如何订阅</h3>
    <p>将本站的 RSS Feed 地址添加到您的播客应用中：</p>
    <code>{{ site_url }}/feed.xml</code>
</div>
{% endblock %}